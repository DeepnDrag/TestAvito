# –ü—Ä–æ–µ–∫—Ç: –ú–∞–≥–∞–∑–∏–Ω –º–µ—Ä—á–∞

## üöÄ –ù–∞—á–∞–ª–æ —Ä–∞–±–æ—Ç—ã

### –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è
- –Ø–∑—ã–∫ –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏—è: Go 1.21+
- –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö: PostgreSQL
- Docker Compose –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—è–º–∏ –∏ —Å–µ—Ä–≤–∏—Å–æ–º

### –£—Å—Ç–∞–Ω–æ–≤–∫–∞
```bash
git clone https://github.com/–≤–∞—à-–ø—Ä–æ—Ñ–∏–ª—å/–≤–∞—à-–ø—Ä–æ–µ–∫—Ç.git
cd –≤–∞—à-–ø—Ä–æ–µ–∫—Ç
go mod tidy
```

## ‚öôÔ∏è –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ
```bash
go run main.go
```

–†–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã –∑–∞–ø—Ä–æ—Å—ã –∫ API:
```bash
POST http://localhost:8080/api/v1/send_coin
POST http://localhost:8080/api/v1/authorize
GET http://localhost:8080/api/v1/buy/cup
GET http://localhost:8080/api/v1/info
```

## üîç –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞
```
‚îú‚îÄ‚îÄ cmd/ # –û—Å–Ω–æ–≤–Ω–∞—è —Ç–æ—á–∫–∞ –≤—Ö–æ–¥–∞
‚îú‚îÄ‚îÄ internal/ # –í–Ω—É—Ç—Ä–µ–Ω–Ω—è—è –ª–æ–≥–∏–∫–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
‚îú‚îÄ‚îÄ configs/ # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω—ã–π —Ñ–∞–π–ª
‚îú‚îÄ‚îÄ web/ # –ü–∞–∫–µ—Ç —Å —Å–µ—Ä–≤–µ—Ä–æ–º, —Ö–µ–Ω–¥–ª–µ—Ä–∞–º–∏ –∏ middleware
‚îú‚îÄ‚îÄ go.mod # –ú–æ–¥—É–ª—å Go
‚îú‚îÄ‚îÄ docker-compose.yml # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –¥–ª—è Docker Compose –¥–ª—è –∑–∞–ø—É—Å–∫–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
‚îú‚îÄ‚îÄ docker-compose.test.yml # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –¥–ª—è Docker Compose –¥–ª—è –∑–∞–ø—É—Å–∫–∞ —Ç–µ—Å—Ç–æ–≤
‚îú‚îÄ‚îÄ Makefile # –°–∫—Ä–∏–ø—Ç—ã –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏ –∑–∞–¥–∞—á (—Å–±–æ—Ä–∫–∞, —Ç–µ—Å—Ç—ã, –∑–∞–ø—É—Å–∫, –æ—Å—Ç–∞–Ω–æ–≤–∫–∞)
```

## üõ†Ô∏è –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

–ù–∞—Å—Ç—Ä–æ–π–∫–∏ –∑–∞–¥–∞—é—Ç—Å—è —á–µ—Ä–µ–∑ —Ñ–∞–π–ª `config.yaml`:

## üê≥ Docker

–î–ª—è –∑–∞–ø—É—Å–∫–∞ —Å–µ—Ä–≤–∏—Å–∞ —Å –ø–æ–º–æ—â—å—é Docker Compose –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Å–ª–µ–¥—É—é—â—É—é –∫–æ–º–∞–Ω–¥—É:
```bash
make up
```

–ü–æ—Ä—Ç —Å–µ—Ä–≤–∏—Å–∞: `localhost:8080`

# –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –ø–æ —Å—Ç—Ä—É–∫—Ç—É—Ä–µ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

## –¢–∞–±–ª–∏—Ü—ã

### 1. **User**
–¢–∞–±–ª–∏—Ü–∞ `User` —Ö—Ä–∞–Ω–∏—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è—Ö –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è.

| –ö–æ–ª–æ–Ω–∫–∞   | –¢–∏–ø    | –û–ø–∏—Å–∞–Ω–∏–µ                                  |
|-----------|--------|-------------------------------------------|
| `ID`      | uint   | –û—Å–Ω–æ–≤–Ω–æ–π –∫–ª—é—á. –£–Ω–∏–∫–∞–ª—å–Ω—ã–π –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è. |
| `Username`| string | –£–Ω–∏–∫–∞–ª—å–Ω—ã–π. –ò–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è. –û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –¥–ª—è –∑–∞–ø–æ–ª–Ω–µ–Ω–∏—è. |
| `Password`| string | –•—ç—à–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –ø–∞—Ä–æ–ª—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è. –û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –¥–ª—è –∑–∞–ø–æ–ª–Ω–µ–Ω–∏—è. |
| `Coins`   | int    | –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –º–æ–Ω–µ—Ç —É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è. –ó–Ω–∞—á–µ–Ω–∏–µ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é ‚Äî 1000. |

### 2. **Product**
–¢–∞–±–ª–∏—Ü–∞ `Product` —Ö—Ä–∞–Ω–∏—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –ø—Ä–æ–¥—É–∫—Ç–∞—Ö, –¥–æ—Å—Ç—É–ø–Ω—ã—Ö –≤ —Å–∏—Å—Ç–µ–º–µ.

| –ö–æ–ª–æ–Ω–∫–∞   | –¢–∏–ø    | –û–ø–∏—Å–∞–Ω–∏–µ                                   |
|-----------|--------|--------------------------------------------|
| `Name`    | string | –û—Å–Ω–æ–≤–Ω–æ–π –∫–ª—é—á. –ù–∞–∑–≤–∞–Ω–∏–µ –ø—Ä–æ–¥—É–∫—Ç–∞. –û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –¥–ª—è –∑–∞–ø–æ–ª–Ω–µ–Ω–∏—è. |
| `Price`   | int    | –¶–µ–Ω–∞ –ø—Ä–æ–¥—É–∫—Ç–∞. –û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –¥–ª—è –∑–∞–ø–æ–ª–Ω–µ–Ω–∏—è. |

### 3. **Inventory**
–¢–∞–±–ª–∏—Ü–∞ `Inventory` –æ—Ç—Å–ª–µ–∂–∏–≤–∞–µ—Ç –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ç–æ–≤–∞—Ä–æ–≤, –ø—Ä–∏–Ω–∞–¥–ª–µ–∂–∞—â–∏—Ö –∫–∞–∂–¥–æ–º—É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é.

| –ö–æ–ª–æ–Ω–∫–∞   | –¢–∏–ø    | –û–ø–∏—Å–∞–Ω–∏–µ                                           |
|-----------|--------|---------------------------------------------------|
| `UserID`  | uint   | –í–Ω–µ—à–Ω–∏–π –∫–ª—é—á, —Å—Å—ã–ª–∞—é—â–∏–π—Å—è –Ω–∞ —Ç–∞–±–ª–∏—Ü—É `User`. –û—Å–Ω–æ–≤–Ω–æ–π –∫–ª—é—á. |
| `ItemType`| string | –û—Å–Ω–æ–≤–Ω–æ–π –∫–ª—é—á. –¢–∏–ø —Ç–æ–≤–∞—Ä–∞. |
| `Quantity`| int    | –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ç–æ–≤–∞—Ä–∞ –≤ –∏–Ω–≤–µ–Ω—Ç–∞—Ä–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è. –û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –¥–ª—è –∑–∞–ø–æ–ª–Ω–µ–Ω–∏—è. |

### 4. **Transaction**
–¢–∞–±–ª–∏—Ü–∞ `Transaction` –∑–∞–ø–∏—Å—ã–≤–∞–µ—Ç —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ –º–µ–∂–¥—É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏.

| –ö–æ–ª–æ–Ω–∫–∞      | –¢–∏–ø    | –û–ø–∏—Å–∞–Ω–∏–µ                                       |
|--------------|--------|-----------------------------------------------|
| `ID`         | uint   | –û—Å–Ω–æ–≤–Ω–æ–π –∫–ª—é—á. –£–Ω–∏–∫–∞–ª—å–Ω—ã–π –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏. |
| `FromUserID` | uint   | –í–Ω–µ—à–Ω–∏–π –∫–ª—é—á, —Å—Å—ã–ª–∞—é—â–∏–π—Å—è –Ω–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è, –æ—Ç–ø—Ä–∞–≤–∏–≤—à–µ–≥–æ –º–æ–Ω–µ—Ç—ã. –û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –¥–ª—è –∑–∞–ø–æ–ª–Ω–µ–Ω–∏—è. |
| `ToUserID`   | uint   | –í–Ω–µ—à–Ω–∏–π –∫–ª—é—á, —Å—Å—ã–ª–∞—é—â–∏–π—Å—è –Ω–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è, –ø–æ–ª—É—á–∏–≤—à–µ–≥–æ –º–æ–Ω–µ—Ç—ã. –û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –¥–ª—è –∑–∞–ø–æ–ª–Ω–µ–Ω–∏—è. |
| `Amount`     | int    | –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –º–æ–Ω–µ—Ç, –ø–µ—Ä–µ–¥–∞–Ω–Ω—ã—Ö –≤ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏. –û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –¥–ª—è –∑–∞–ø–æ–ª–Ω–µ–Ω–∏—è. |

## –°–≤—è–∑–∏ –º–µ–∂–¥—É —Ç–∞–±–ª–∏—Ü–∞–º–∏

- **User - Inventory**: –û–¥–∏–Ω –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –º–æ–∂–µ—Ç –∏–º–µ—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ –∑–∞–ø–∏—Å–µ–π –≤ —Ç–∞–±–ª–∏—Ü–µ `Inventory`, –∫–∞–∂–¥–∞—è –∏–∑ –∫–æ—Ç–æ—Ä—ã—Ö –±—É–¥–µ—Ç –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è—Ç—å –æ—Ç–¥–µ–ª—å–Ω—ã–π —Ç–∏–ø —Ç–æ–≤–∞—Ä–∞ –∏ –µ–≥–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ. –≠—Ç–æ —Å–≤—è–∑—å "–æ–¥–∏–Ω –∫–æ –º–Ω–æ–≥–∏–º".
  
- **User - Transaction**: –û–¥–∏–Ω –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –º–æ–∂–µ—Ç –æ—Ç–ø—Ä–∞–≤–ª—è—Ç—å –∏ –ø–æ–ª—É—á–∞—Ç—å –º–æ–Ω–µ—Ç—ã –≤ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—è—Ö. –≠—Ç–æ —Å–≤—è–∑—å "–æ–¥–∏–Ω –∫–æ –º–Ω–æ–≥–∏–º" —Å —Ç–∞–±–ª–∏—Ü–µ–π `Transaction`, –≥–¥–µ –ø–æ–ª—è `FromUserID` –∏ `ToUserID` —Å—Å—ã–ª–∞—é—Ç—Å—è –Ω–∞ —Ç–∞–±–ª–∏—Ü—É `User`.

- **Product - Inventory**: –¢–∞–±–ª–∏—Ü–∞ `Inventory` –º–æ–∂–µ—Ç —Ö—Ä–∞–Ω–∏—Ç—å —Ä–∞–∑–ª–∏—á–Ω—ã–µ —Ç–∏–ø—ã –ø—Ä–æ–¥—É–∫—Ç–æ–≤ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è. –ü–æ–ª–µ `ItemType` —Å—Å—ã–ª–∞–µ—Ç—Å—è –Ω–∞ –ø—Ä–æ–¥—É–∫—Ç, —á—Ç–æ —Å–≤—è–∑—ã–≤–∞–µ—Ç —Ç–∞–±–ª–∏—Ü—É `Inventory` —Å —Ç–∞–±–ª–∏—Ü–µ–π `Product`.


## ‚ö° –í—ã–±–æ—Ä —Ñ—Ä–µ–π–º–≤–æ—Ä–∫–∞ Echo

–î–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ –±—ã–ª –≤—ã–±—Ä–∞–Ω –≤–µ–±-—Ñ—Ä–µ–π–º–≤–æ—Ä–∫ [Echo](https://echo.labstack.com/) –ø–æ —Å–ª–µ–¥—É—é—â–∏–º –ø—Ä–∏—á–∏–Ω–∞–º:
- –í—ã—Å–æ–∫–∞—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –∏ –Ω–∏–∑–∫–∏–µ –Ω–∞–∫–ª–∞–¥–Ω—ã–µ —Ä–∞—Å—Ö–æ–¥—ã
- –£–¥–æ–±–Ω—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –º–∞—Ä—à—Ä—É—Ç–∞–º–∏
- –í—Å—Ç—Ä–æ–µ–Ω–Ω–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞ middleware, –Ω–∞–ø—Ä–∏–º–µ—Ä, –¥–ª—è –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è –∏ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏
- –ü—Ä–æ—Å—Ç–æ—Ç–∞ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ —Å PostgreSQL –∏ –¥—Ä—É–≥–∏–º–∏ –≤–Ω–µ—à–Ω–∏–º–∏ —Å–µ—Ä–≤–∏—Å–∞–º–∏

## üõ†Ô∏è –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

–†–µ–∞–ª–∏–∑–æ–≤–∞–Ω –∫–∞—Å—Ç–æ–º–Ω—ã–π —Ö–µ–Ω–¥–ª–µ—Ä –¥–ª—è –ª–æ–≥–≥–µ—Ä–∞ `log/slog`, –ø–æ–∑–≤–æ–ª—è—é—â–∏–π –≤—ã–≤–æ–¥–∏—Ç—å –ª–æ–≥–∏ –≤ —á–∏—Ç–∞–µ–º–æ–º —Ñ–æ—Ä–º–∞—Ç–µ —Å —Ü–≤–µ—Ç–æ–≤—ã–º–∏ –æ–±–æ–∑–Ω–∞—á–µ–Ω–∏—è–º–∏ –¥–ª—è –∫–∞—Ç–µ–≥–æ—Ä–∏–π:
- `INFO` ‚Äî –∑–µ–ª–µ–Ω—ã–π
- `WARN` ‚Äî –∂–µ–ª—Ç—ã–π
- `DEBUG` ‚Äî —Å–∏–Ω–∏–π
- `ERROR` ‚Äî –∫—Ä–∞—Å–Ω—ã–π

## üîí –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è –∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

–î–ª—è —Ä–∞–±–æ—Ç—ã —Å JWT –±—ã–ª –≤—ã–±—Ä–∞–Ω –ø–∞–∫–µ—Ç [github.com/golang-jwt/jwt/v4](https://pkg.go.dev/github.com/golang-jwt/jwt/v4) –ø–æ —Å–ª–µ–¥—É—é—â–∏–º –ø—Ä–∏—á–∏–Ω–∞–º:
- –°–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–∞–º JWT (RFC 7519)
- –ü—Ä–æ—Å—Ç–æ—Ç–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –∏ –≥–∏–±–∫–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ —Ç–æ–∫–µ–Ω–æ–≤

–î–ª—è —Ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏—è –ø–∞—Ä–æ–ª–µ–π –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –ø–∞–∫–µ—Ç [golang.org/x/crypto/bcrypt](https://pkg.go.dev/golang.org/x/crypto/bcrypt), —Ç–∞–∫ –∫–∞–∫:
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç –∞–¥–∞–ø—Ç–∏–≤–Ω—ã–π –∞–ª–≥–æ—Ä–∏—Ç–º bcrypt, —É—Å—Ç–æ–π—á–∏–≤—ã–π –∫ –∞—Ç–∞–∫–∞–º –ø–µ—Ä–µ–±–æ—Ä–∞
- –ü—Ä–æ—Å—Ç–∞—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –∏ —É–¥–æ–±–Ω—ã–µ –º–µ—Ç–æ–¥—ã –¥–ª—è —Ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏—è –∏ –ø—Ä–æ–≤–µ—Ä–∫–∏ –ø–∞—Ä–æ–ª–µ–π

## üóÇÔ∏è –†–∞–±–æ—Ç–∞ —Å –±–∞–∑–æ–π –¥–∞–Ω–Ω—ã—Ö

–î–ª—è —Ä–∞–±–æ—Ç—ã —Å PostgreSQL –±—ã–ª –≤—ã–±—Ä–∞–Ω ORM [gorm.io/gorm](https://gorm.io/) –ø–æ —Å–ª–µ–¥—É—é—â–∏–º –ø—Ä–∏—á–∏–Ω–∞–º:
- –£–¥–æ–±–Ω–æ–µ –∏ –¥–µ–∫–ª–∞—Ä–∞—Ç–∏–≤–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ –º–æ–¥–µ–ª–µ–π
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –º–∏–≥—Ä–∞—Ü–∏–π, —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π –∏ —Å–≤—è–∑–µ–π –º–µ–∂–¥—É —Å—É—â–Ω–æ—Å—Ç—è–º–∏
- –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–µ —Å PostgreSQL



